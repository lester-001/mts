<?xml version="1.0" encoding="UTF-8"?>
<!-- Related XMLSchema file: conf/schemas/scenario.xsd -->
<scenario>
    <function name="sendInitUeMsg">
        <input>
        </input>
    
        <do>    
            <function file="nas/InitialRegistration.xml" />

            <call name="initialRegistration" >
                <input>
                    <parameter name="[function:mobile_id]"  value="1111"/>
                </input>

                <output>
                    <parameter name="[function:init_msgd]" /> 
                </output>
            </call>
            
            <sendMessageNGAP name="InitialUEMessage" channel="[ngap_ch_name]">
            <NGAP-PDU>
                <initiatingMessage>
                    <procedureCode>15</procedureCode>
                    <criticality>ignore</criticality>
                    <value>
                        <InitialUEMessage>
                            <protocolIEs>
                                <protocolIEs>
                                    <id>85</id>
                                    <criticality>reject</criticality>
                                    <value>
                                        <RAN-UE-NGAP-ID>[RAN_UE_NGAP_ID]</RAN-UE-NGAP-ID>
                                    </value>
                                </protocolIEs>
                                <protocolIEs>
                                    <id>38</id>
                                    <criticality>reject</criticality>
                                    <value>
                                        <NAS-PDU>
                                            [init_msgd]
                                        </NAS-PDU>
                                    </value>
                                </protocolIEs>
                                <protocolIEs>
                                    <id>121</id>
                                    <criticality>reject</criticality>
                                    <value>
                                        <UserLocationInformation>
                                            <userLocationInformationNR>
                                                <nR-CGI>
                                                    <pLMNIdentity>[gnb_plmn_id]</pLMNIdentity>
                                                    <nRCellIdentity>[gnb_cell_id]</nRCellIdentity>
                                                </nR-CGI>
                                                <tAI>
                                                    <pLMNIdentity>[gnb_plmn_id]</pLMNIdentity>
                                                    <tAC>[gnb_tac]</tAC>
                                                </tAI>
                                            </userLocationInformationNR>
                                        </UserLocationInformation>
                                    </value>
                                </protocolIEs>
                                <protocolIEs>
                                    <id>90</id>
                                    <criticality>ignore</criticality>
                                    <value>
                                        <RRCEstablishmentCause>mo-Signalling</RRCEstablishmentCause>
                                    </value>
                                </protocolIEs>
                                <protocolIEs>
                                    <id>112</id>
                                    <criticality>ignore</criticality>
                                    <value>
                                        <UEContextRequest>requested</UEContextRequest>
                                    </value>
                                </protocolIEs>
                            </protocolIEs>
                        </InitialUEMessage>
                    </value>
                </initiatingMessage>
            </NGAP-PDU>
            </sendMessageNGAP>
        </do>      
    </function>
</scenario>
